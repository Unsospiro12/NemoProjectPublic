<br/>
<br/>

# <p align="center"> **GuardiansBattleField**  </p>

##### <p align="center"> <b> 내일배움캠프 Unity 게임개발 최종 프로젝트 </b>

<br/>
<br/>

<br/>

---

### 📖 목차
+ [팀 소개](#팀-소개)
+ [프로젝트 소개](#프로젝트-소개)
+ [결과물 소개](#결과물-소개)
+ [기능 소개](#기능-소개)
+ [와이어 프레임](#와이어-프레임)
+ [기술 스택](#기술-스택)
+ [TroubleShooting](#TroubleShooting)
+ [UML 다이어그램](#UML-다이어그램)
---

### ✨팀 소개
| 이름   | 직책 | 직무 |
|--------|------|------|
| 이상수 | 팀장 | 플레이어 이동, 공격 및 플레이어 관련 로직 구현, 플레이어 FSM 구현, 캐릭터 이동 알고리즘 구현 |
| 권태하 | 팀원 | 카메라 이동로직 구현, 유닛 업그레이드 기능 구현, 자원 획득 및 소비 로직 구현 게임종료, 게임초기화 기능 구현 |
| 김동현 | 팀원 | 적 유닛 이동, 공격기능 구현, 적 유닛 FSM구현, 유닛 별 효과음, 이펙트 기능 구현 |
| 이인호 | 팀원 | 유닛 스텟 데이터 구현, 유닛 선택, 설정 UI등 각종 UI 구현 |

---

### ✨프로젝트 소개

 `Info` **스타크래프트 유즈맵 네모네모디펜스를 참조삼아 유니티로 디펜스 게임을 제작하였습니다.**

 `Stack` C#, Unity-2022.3.17f, Visual Studio 2022_17.9.6, GitHub

 `Made by` **이상수, 권태하, 김동현, 이인호** 

---

### ✨결과물 소개

### [🌾Team Notion](https://www.notion.so/teamsparta/d6af836e44564fe0998c759e7e37f8a6)

### [🌕YouTube](https://www.youtube.com/)

---

### ✨기능 소개

1. 튜토리얼
![튜토리얼](https://github.com/user-attachments/assets/a2f19bc8-fd64-4ca2-a576-c6d655c4f3ce)

2. 사운드 설정
![사운드 조정](https://github.com/user-attachments/assets/08d2d764-fedc-46d4-a542-0d402b7b95f3)

3. 플레이어의 상태를 알려주는 상단 UI
![게임 화면](https://github.com/user-attachments/assets/6bea57a0-734d-4a9a-b212-be601de30abf)

4. 다양한 유닛 선택 및 관리
![유닛 조종](https://github.com/user-attachments/assets/aaa2cae8-6fc1-471b-9238-0f005cc4502f)

5. 여러가지 자원 획득 방법
![자원 획득](https://github.com/user-attachments/assets/b3d31a21-ab00-4848-9df1-b9c1e0b750eb)

6. 유닛 생산 및 업그레이드
![유닛 생산과 업그레이드](https://github.com/user-attachments/assets/2acf8ccd-c9b6-46d5-bd32-ead7bd326960)

---

### ✨와이어 프레임
<게임 씬>
![image](https://github.com/user-attachments/assets/af772a03-85ec-43b4-8fbd-ee6f9c912d9b)

<게임 오버 UI>
![image](https://github.com/user-attachments/assets/727feb44-2436-4ce9-8693-eb428e698805)


---

### ✨기술 스택
| 기술 스택   | 사용 이유 | 결 과 |
|:--------:|------|------|
| 유한상태기 | Player와 Enemy의 공격, 피격, 이동, 사망들을 정의 | FSM은 객체가 가질 수 있는 모든 상태를 명확하게 정의하고, 각 상태에서 수행할 작업과 상태 전환을 체계적으로 관리할 수 있게 됐다. 코드의 가독성과 유지보수성을 높였다 |
| 싱글톤 디자인 | 플레이어의 스탯, 골드를 다양한 클래스에서 접근 | 스탯, 골드 변수를 전역적으로 접근할 수 있어 데이터를 쉽게 공유하고 사용할 수 있다. 메모리 사용량을 줄이고, 자원 관리를 효율적으로 할 수 있었다 |
| 오브젝트 풀 | 몬스터와 유닛의 수가 늘어남에 따른 최적화 필요 | 몬스터, 유닛등 오브젝트가 늘어남에 따라 오브젝트를 새로 생성하지 않고 오브젝트 풀을 이용해서 미리 필요한 오브젝트들을 생성해두고 사용했다. 오브젝트를 생성하는데 필요한 메모리를 줄일수 있었다. |
| 코루틴 | 유저 경험을 위해 특정 기능은 상수 시간을 기다림 | 문구를 출력할 때 플레이어가 읽을 수 있도록 일정 시간을 기다리거나, 동시에 이뤄지는 작업에 순서를 부여하는 등의 활용으로 게임으로서 유저경험을 향상시킬 수 있었다.

---

### ✨TroubleShooting

1.
문제 상황 - 데이터 저장을 작업 하던 도중 [NullReferenceException: Object reference not set to an instance of an object] 발생

문제 원인 - playerData.Vectors 리스트가 초기화되지 않았기 때문

해결 방법 - playerData.Vectors 리스트를 초기화하는 코드를 추가

개선 효과 - 데이터 저장 오류 제거


2. 
문제 상황 - 게임이 종료될 때 지속적으로 원인을 알 수 없던 오류 메세지가 발생

문제 원인 - 싱글톤 스크립트에 이벤트 등록 되어 있던 UI스크립트들에서 Disable하며 이벤트 구독 해제를 위해 싱글톤을 호출하지만 이미 싱글톤 스크립트가 제거된 상황이었음.

해결 방법 - 구독된 이벤트들을 싱글톤 스크립트에서 일괄적으로 초기화 시키도록 스크립트 수정

개선 효과 - 게임 종료시 표시되던 오류 메세지가 사라짐


3.
문제 상황 - 오디오 믹서를 사용하여 소리를 조정하는데 슬라이더와 스크립트를 연결한후 슬라이더를 조정해도 사운드가 변경되지 않는 상황 발생

문제 원인 - 오디오 믹서의 파라미터를 설정하지 않음

해결 방법 - 각각의 오디오 믹서에 맞는 파라미터를 설정후 문제 해결

개선 효과 - 스크립트를 이용해 음량 조절 가능

![image](https://github.com/user-attachments/assets/d69bf079-74eb-43ac-a399-28fc5a4c6f89)


4.
문제 상황 - 슬라이더에 스크립트 연결후 슬라이더를 조정했지만 슬라이더가 가장 작을때 음량이 작아지지 않는 현상

문제 원인 - 오디오 믹서의 음량은 데시벨로 계산

해결 방법 - 슬라이더의 수치를 적절한 계산을 통해 데시벨로 변환하여 오디오 믹서에 입력 슬라이더의 수치(0~1)을 Mathf.Log10(value) * 20으로 계산해서 오디오 믹서에 대입 

개선 효과 - 음량을 적절한 수준에서 조정


5.
문제 상황 - 유닛에 StateMachine을 적용하는기 어려웠음

문제 원인 - 이동, 공격, 추격, 공격하면서 이동, 경계 등 동작이 많아 State를 나누기가 어려웠음

해결 방법 - State를 일단 큰 덩어리로 나눠서 이동, 경계, 이동하며 공격, 추격, 홀드 상태로 나눴음 여전히 State끼리 겹치는 부분이 있어서 이를 좀 더 세분화하여 계층적 StateMachine을 적용해볼 생각임


6.
문제 상황 - 유닛 단체 이동시 정렬되지 않음

문제 원인 - 유닛을 단체로 이동 시킬 때 이들을 목표 위치 주변에 적당히 배치할 방법이 없었음

해결 방법 - Grid를 게임에 적용하고 이를 기준으로 배치를 시킴


7.
문제 상황 - 유닛이 공격을 실행하고 나서 공격 애니메이션이 꺼지지않음

문제 원인 - 공격을 bool 파라미터로 실행과 종료를 하다 보니 종료 타이밍이 명확하지 않음

해결 방법 - Trigger로 바꾸어 애니메이션이 끝나면 자동으로 종료되도록 함


---

### ✨UML 다이어그램

<전체 구조>
![image](https://github.com/user-attachments/assets/c925754d-9aee-40b9-8140-75a8e3d3e7f2)


---

